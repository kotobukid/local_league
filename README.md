# local_league

このプロジェクトは小規模なゲーム大会の、総当たり戦の結果をマトリックスで管理したり、その履歴を参照できるようにするものです。

# 概要

このプロジェクトでは、複数人のプレイヤーが定期的・継続的にゲームの対戦を行い、その結果の管理・集計を行うというものです。

想定している規模感は小規模なものです。プレイヤー総数は4〜5人。管理者ユーザーは一人。毎月1回のシーズンが発生します。シーズン中には原則2回のフェスが開催されます。

1回のフェスには原則全プレイヤーが集結し競技を行い、その勝ち負けを記録します。暫定イメージは以下の通りです。

```markdown

# シーズン：10月

# 10月前半(10/09)

重み 1

|           |プレイヤーA|プレイヤーB|プレイヤーC|プレイヤーD|勝ち点|集計|
| プレイヤーA |    -    |    ○    |    ○    |    ✕    |   2  | 2  |
| プレイヤーB |    ✕    |    -    |    ✕    |    ○    |   1  | 1  |
| プレイヤーC |    ✕    |    ○    |    -    |    ✕    |   1  | 1  |
| プレイヤーD |    ○    |    ✕    |    ○    |    -    |   2  | 2  |

[+ 結果の登録]

# 10月後半(10/23)

重み 1.8

|           |プレイヤーA|プレイヤーB|プレイヤーC|プレイヤーD|勝ち点|集計|
| プレイヤーA |    -    |    ○    |    ○    |    ✕    |   2  | 3.6  |
| プレイヤーB |    ✕    |    -    |    ✕    |    ○    |   1  | 1.8  |
| プレイヤーC |    ✕    |    ○    |    -    |    ✕    |   1  | 1.8  |
| プレイヤーD |    ○    |    ✕    |    ○    |    -    |   2  | 3.6  |

[+ 結果の登録]

[+ フェスを追加]

# シーズン結果

プレイヤーA: 5.6
プレイヤーD: 5.6
プレイヤーB: 2.8
プレイヤーC: 2.8
```




# 技術的要件

- ブラウザで使用できるWebUIを用意する
- VPS(Linux)でホストする
- サーバーにログインしてCLIで発行したAPIキーを用いて管理者を認証する
- データは頻繁に更新されるものではないため、サーバー上のシンプルなテキストファイルに保存すれば十分であり、Gitなどによる履歴管理は不要

## 想定している技術スタック

| 項目 | 想定 |
| --- | --- |
| Web UI | ブラウザから利用するシンプルなWeb UI |
| ホスティング | VPS(Linux) 上での稼働 |
| 認証 | サーバーで発行するAPIキーによる管理者認証 |
| ストレージ | サーバーに配置したテキストファイルへ保存すれば十分で、履歴管理は前提としない |

# 希望するユーザー体験

- データの更新は管理者のみが行う。APIキーなしでアクセスするクライアントにはデータの追加機能を提供する必要はない。また動的な通知も不要
- 管理者は「シーズン」を追加可能。シーズンには「プレイヤー」を複数人登録可能。シーズンには「フェス（より良い名前の提案を希望。定期的に開催される、一日分のバトル群）」を複数設定でき、結果を即座にマトリックスへ反映できる。

## WebUI/Codexでの利用想定

Codex（コーデックス）は、本プロジェクトが提供するWebUIを通じてシーズン・フェスの進行状況を記録・参照するための中核的な台帳です。管理者が記録した対戦結果が即座にCodexへ反映され、プレイヤーや観戦者が最新情報を参照できます。

### 主な画面と操作

- シーズン作成画面：シーズン名・期間・参加プレイヤーを登録し、新しいCodexページを生成します。
- フェス設定画面：各シーズン内のフェス（1日分の大会）を作成し、開催日や重みづけ、参加者を定義します。
- 試合結果登録画面：フェス中の対戦カードごとに勝敗を入力し、勝ち点や集計値がマトリックスに反映されます。
- 履歴閲覧画面：過去シーズンとフェスの結果を時系列で閲覧し、Codexに蓄積された戦績を確認します。

### 管理者の認証フロー

管理者はサーバー上のCLIツールを用いてAPIキーを発行します。WebUIではログイン時にこのAPIキーを入力することでCodexへの書き込み権限が有効化され、シーズン作成・フェス設定・結果登録などの管理操作が可能になります。APIキーを提示できないユーザーは、WebUI上でも自動的に閲覧専用モードで利用されます。

### 一般ユーザーの閲覧体験と他クライアントとの差異

APIキーを持たない一般ユーザーは、WebUIでCodexに公開されているマトリックスと履歴のみを参照できます。管理系ボタンや編集フォームは表示されず、閲覧専用の滑らかなUXを提供します。対照的に、CLIツールや他のクライアントはAPIキーを保持する管理者が利用することを前提としており、直接テキストファイルを更新したり自動化スクリプトと連携したりといった高度な操作を実行できます。

### 用語の定義

- シーズン：一定期間（例：1か月）に開催される対戦の集合体。
- フェス：シーズン内で定期的に行われる1日分のバトル群。Codexではシーズンを構成する主要イベント単位として扱います。
- Codex：管理者が入力したシーズン・フェス・試合結果が蓄積されるWebUI上の閲覧・記録台帳。プレイヤーと観戦者はここから最新のマトリックスと履歴を参照します。
